{% extends "base.html" %}

{% load crispy_forms_tags %}

{% block extra_title %}
    Shopping Cart
{% endblock extra_title%}

{% block content %}

    <h2>Shopping Cart</h2>
    <div>
        {% if ticket_count == 0 %}
            <p>Empty cart</p>
        {% else %}
            {% for cart_item in cart_items %}
                <p>
                    {{ cart_item }}
                </p>
                <form action="{% url "cart:update" ticket_type_id=cart_item.ticket_type_id %}" method="POST">
                    {% csrf_token %}
                    <p>SET INPUT MAX TO AMOUNT OF TICKETS LEFT</p>
                    <label>Quantity:
                        <input name="quantity"
                               type="number"
                               value="{{ cart_item.quantity }}"
                               min="0"
                               max="100"/>
                    </label>
                    <button type="submit">Update</button>
                </form>
                <form action="{% url "cart:remove" ticket_type_id=cart_item.ticket_type_id %}" method="POST">
                    {% csrf_token %}
                    <button type="submit">Remove</button>
                </form>
            {% endfor %}
            <div>
                <p>REMINDER - CART UPDATE HERE TOO!</p>
                <a href="{% url "checkout:checkout" %}">Checkout</a>
            </div>
        {% endif %}
    </div>

{% endblock content %}
